{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ruchikaashokbharati/Documents/Projects/Backend_Kahoot-main3/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ruchikaashokbharati/Documents/Projects/Backend_Kahoot-main3/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/ruchikaashokbharati/Documents/Projects/Backend_Kahoot-main3/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ruchikaashokbharati/Documents/Projects/Backend_Kahoot-main3/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/ruchikaashokbharati/Documents/Projects/Backend_Kahoot-main3/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/ruchikaashokbharati/Documents/Projects/Backend_Kahoot-main3/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ruchikaashokbharati/Documents/Projects/Backend_Kahoot-main3/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link,Redirect}from'react-router-dom';import{connect}from'react-redux';import{editingQuiz}from'../../Reducer/Reducer';import jwt from\"jsonwebtoken\";import'./Host-Question.css';import'./Host.css';import QuizComponent from'./QuizComponent';// import {useParams} from 'react-router-dom';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Questions=/*#__PURE__*/function(_Component){_inherits(Questions,_Component);var _super=_createSuper(Questions);function Questions(props){var _this;_classCallCheck(this,Questions);_this=_super.call(this,props);_this.state={questions:[],quiz:{},newName:'',newInfo:'',userId:'',toggle:false,redirect:false};_this.setDone=_this.setDone.bind(_assertThisInitialized(_this));return _this;}_createClass(Questions,[{key:\"componentDidMount\",value:function componentDidMount(){// const { userId } = useParams();\n// var history = useHistory();\nconsole.log(\"Addanswercomponent2 called\");// var userId = this.props.match.params.id;\n// console.log(\"id\",userId);\nconsole.log(\"props\",this.props);this.setState({quiz:this.props.quizToEdit,newName:this.props.quizToEdit.quizName,newInfo:this.props.quizToEdit.quizDescription,userId:this.props.quizToEdit.userId});console.log(\"quiz\",this.state.quiz);var token=localStorage.getItem(\"token\");// var decoded = jwt.decode(token);\nthis.getQuestions();}},{key:\"getQuestions\",value:function(){var _getQuestions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem(\"token\");console.log(\"id is \".concat(this.props.quizToEdit._id));_context.next=4;return axios.get(\"https://multiplayer-online-quiz-game.vercel.app/quizquestions/getQuestions/\".concat(this.props.quizToEdit._id),{headers:{'auth-token':token}});case 4:response=_context.sent;console.log(\"data\",response.data);this.setState({questions:response.data});case 7:case\"end\":return _context.stop();}}},_callee,this);}));function getQuestions(){return _getQuestions.apply(this,arguments);}return getQuestions;}()},{key:\"deleteQuestion\",value:function(){var _deleteQuestion=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var token,decoded,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=localStorage.getItem(\"token\");decoded=jwt.decode(token);if(!(decoded.exp*1000<=Date.now())){_context2.next=6;break;}this.props.history.push(\"/users/login\");_context2.next=10;break;case 6:_context2.next=8;return axios.delete(\"https://multiplayer-online-quiz-game.vercel.app/quizquestions/deleteQuestion/\".concat(id),{headers:{'auth-token':token}});case 8:response=_context2.sent;this.getQuestions();case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function deleteQuestion(_x){return _deleteQuestion.apply(this,arguments);}return deleteQuestion;}()},{key:\"displayEdit\",value:function displayEdit(){this.setState({toggle:!this.state.toggle});}},{key:\"updateQuiz\",value:function(){var _updateQuiz=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this$state,newName,newInfo,quiz,id,token,decoded;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$state=this.state,newName=_this$state.newName,newInfo=_this$state.newInfo,quiz=_this$state.quiz;console.log(\"update quiz called\");// let { quiz } = this.state;\nconsole.log(\"quiz\",quiz);this.setState({toggle:!this.state.toggle});if(!(newName&&newInfo)){_context3.next=17;break;}id=quiz._id;token=localStorage.getItem(\"token\");decoded=jwt.decode(token);if(!(decoded.exp*1000<=Date.now())){_context3.next=12;break;}this.props.history.push(\"/users/login\");_context3.next=15;break;case 12:_context3.next=14;return axios.put(\"https://multiplayer-online-quiz-game.vercel.app/quiz/updateQuiz/\".concat(id),{quizName:newName,quizDescription:newInfo},{headers:{'auth-token':token}});case 14:this.handleUpdatedQuiz(quiz._id);case 15:_context3.next=18;break;case 17:alert('All fields must be completed');case 18:case\"end\":return _context3.stop();}}},_callee3,this);}));function updateQuiz(){return _updateQuiz.apply(this,arguments);}return updateQuiz;}()},{key:\"handleUpdatedQuiz\",value:function(){var _handleUpdatedQuiz=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id){var token,decoded,response,responseData;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:token=localStorage.getItem(\"token\");decoded=jwt.decode(token);// if(decoded.exp*1000<=Date.now()){\n//     this.props.history.push(\"/users/login\");\n// }else{\n_context4.next=4;return axios.get(\"https://multiplayer-online-quiz-game.vercel.app/quiz/getQuiz/\".concat(this.props.quizToEdit._id),{headers:{'auth-token':token}});case 4:response=_context4.sent;console.log(\"responseData\",response.data);responseData=response.data;this.props.editingQuiz(responseData[0]);console.log(\"props\",this.props.quizToEdit);this.setState({quiz:this.props.quizToEdit});// }\ncase 10:case\"end\":return _context4.stop();}}},_callee4,this);}));function handleUpdatedQuiz(_x2){return _handleUpdatedQuiz.apply(this,arguments);}return handleUpdatedQuiz;}()},{key:\"setDone\",value:function setDone(){console.log(\"setDone called\");this.setState({redirect:true});}},{key:\"render\",value:function render(){var _this2=this;// var userId = this.props.match.params.id;\n// console.log(\"answercomponentuserId\",userId);\nvar _this$state2=this.state,questions=_this$state2.questions,redirect=_this$state2.redirect,userId=_this$state2.userId;console.log(\"userId\",userId);console.log(this.state.redirect);if(redirect){return/*#__PURE__*/_jsx(Redirect,{to:\"/host/\".concat(userId)});}if(questions){var mappedQuestions=questions.map(function(question){return/*#__PURE__*/_jsxs(\"div\",{className:\"question-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:question.question}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"1: \",question.answer1]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"2: \",question.answer2]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"3: \",question.answer3]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"4: \",question.answer4]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Correct: \",question.correctAnswer]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-container-edit\",children:[/*#__PURE__*/_jsx(Link,{to:\"/host/editquestion/\".concat(question._id,\"/\").concat(userId),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-play\",children:\"Edit\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.deleteQuestion(question._id);},className:\"btn-play\",children:\"Delete\"})]})]},question._id);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"mapped-container\",children:[!this.state.toggle?/*#__PURE__*/_jsxs(\"div\",{className:\"toggle-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn-done-div\",children:/*#__PURE__*/_jsx(\"button\",{onClick:this.setDone,className:\"btn-play btn-done\",children:\"Done\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"kwizz-container-edit\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"kwizz-title\",children:this.state.quiz.quizName}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"kwizz-info kwizz-desc\",children:this.state.quiz.quizDescription}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-update\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.displayEdit();},className:\"btn-play\",children:\"Update\"})})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"toggle-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn-done-div\",children:/*#__PURE__*/_jsx(Link,{to:\"/host\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-play btn-done\",children:\"Done\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"kwizz-container-edit\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:this.state.quiz.quizName,onChange:function onChange(e){console.log(\"e\",e.target.value);_this2.setState({newName:e.target.value});},className:\"title-input input-edit \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:this.state.quiz.quizDescription,onChange:function onChange(e){console.log(\"e\",e.target.value);_this2.setState({newInfo:e.target.value});},className:\"desc-input input-edit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-container-edit\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.updateQuiz();},className:\"btn-play\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.displayEdit();},className:\"btn-play\",children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-edit-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"add-quesiton-div\",children:/*#__PURE__*/_jsx(Link,{to:\"/host/newquestion/\".concat(this.props.quizToEdit._id,\"/\").concat(userId),className:\"btn-link\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-new\",id:\"add-question-btn\",children:\"Add Question\"})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"mapped-questions\",children:mappedQuestions})]})]});}}]);return Questions;}(Component);function mapStateToProps(state){return{quizToEdit:state.quizToEdit};}export default connect(mapStateToProps,{editingQuiz:editingQuiz})(Questions);","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/Backend_Kahoot-main3/client/src/components/Host/AddAnswersComponent2.js"],"names":["React","Component","axios","Link","Redirect","connect","editingQuiz","jwt","QuizComponent","Questions","props","state","questions","quiz","newName","newInfo","userId","toggle","redirect","setDone","bind","console","log","setState","quizToEdit","quizName","quizDescription","token","localStorage","getItem","getQuestions","_id","get","headers","response","data","id","decoded","decode","exp","Date","now","history","push","delete","put","handleUpdatedQuiz","alert","responseData","mappedQuestions","map","question","answer1","answer2","answer3","answer4","correctAnswer","deleteQuestion","displayEdit","e","target","value","updateQuiz","mapStateToProps"],"mappings":"ikCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAcC,QAAd,KAA8B,kBAA9B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,WAAT,KAA4B,uBAA5B,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,CACA,MAAO,qBAAP,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA;2FACMC,CAAAA,S,sGACF,mBAAYC,KAAZ,CAAmB,2CACf,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACTC,SAAS,CAAE,EADF,CAETC,IAAI,CAAE,EAFG,CAGTC,OAAO,CAAE,EAHA,CAITC,OAAO,CAAE,EAJA,CAKTC,MAAM,CAAC,EALE,CAMTC,MAAM,CAAE,KANC,CAOTC,QAAQ,CAAC,KAPA,CAAb,CASA,MAAKC,OAAL,CAAe,MAAKA,OAAL,CAAaC,IAAb,+BAAf,CAXe,aAalB,C,uDACD,4BAAoB,CAChB;AACA;AACAC,OAAO,CAACC,GAAR,CAAY,4BAAZ,EACA;AACA;AACAD,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqB,KAAKZ,KAA1B,EACA,KAAKa,QAAL,CAAc,CACVV,IAAI,CAAE,KAAKH,KAAL,CAAWc,UADP,CAEVV,OAAO,CAAC,KAAKJ,KAAL,CAAWc,UAAX,CAAsBC,QAFpB,CAGVV,OAAO,CAAC,KAAKL,KAAL,CAAWc,UAAX,CAAsBE,eAHpB,CAIVV,MAAM,CAAC,KAAKN,KAAL,CAAWc,UAAX,CAAsBR,MAJnB,CAAd,EAMAK,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAoB,KAAKX,KAAL,CAAWE,IAA/B,EACA,GAAMc,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA;AAEA,KAAKC,YAAL,GAEH,C,iHAED,sJACUH,KADV,CACkBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADlB,CAEGR,OAAO,CAACC,GAAR,iBAAqB,KAAKZ,KAAL,CAAWc,UAAX,CAAsBO,GAA3C,GAFH,sBAGwB7B,CAAAA,KAAK,CAAC8B,GAAN,sFAAwF,KAAKtB,KAAL,CAAWc,UAAX,CAAsBO,GAA9G,EAAoH,CACrIE,OAAO,CAAC,CACJ,aAAaN,KADT,CAD6H,CAApH,CAHxB,QAGOO,QAHP,eAQQb,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAoBY,QAAQ,CAACC,IAA7B,EACA,KAAKZ,QAAL,CAAc,CACVX,SAAS,CAAEsB,QAAQ,CAACC,IADV,CAAd,EATR,2D,mNAcA,kBAAqBC,EAArB,iJACUT,KADV,CACkBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADlB,CAGQQ,OAHR,CAGkB9B,GAAG,CAAC+B,MAAJ,CAAWX,KAAX,CAHlB,MAIOU,OAAO,CAACE,GAAR,CAAY,IAAZ,EAAkBC,IAAI,CAACC,GAAL,EAJzB,2BAKQ,KAAK/B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,cAAxB,EALR,sDAO8BzC,CAAAA,KAAK,CAAC0C,MAAN,wFAA6FR,EAA7F,EAAkG,CACzHH,OAAO,CAAC,CACJ,aAAaN,KADT,CADiH,CAAlG,CAP9B,QAOYO,QAPZ,gBAYI,KAAKJ,YAAL,GAZJ,8D,iIAgBA,sBAAc,CACV,KAAKP,QAAL,CAAc,CACVN,MAAM,CAAE,CAAC,KAAKN,KAAL,CAAWM,MADV,CAAd,EAGH,C,6GAED,0MAGqC,KAAKN,KAH1C,CAGUG,OAHV,aAGUA,OAHV,CAGmBC,OAHnB,aAGmBA,OAHnB,CAG4BF,IAH5B,aAG4BA,IAH5B,CAIIQ,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACA;AACAD,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAmBT,IAAnB,EACA,KAAKU,QAAL,CAAc,CACVN,MAAM,CAAE,CAAC,KAAKN,KAAL,CAAWM,MADV,CAAd,EAPJ,KAWQH,OAAO,EAAIC,OAXnB,4BAYYqB,EAZZ,CAYiBvB,IAAI,CAACkB,GAZtB,CAacJ,KAbd,CAasBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAbtB,CAcYQ,OAdZ,CAcsB9B,GAAG,CAAC+B,MAAJ,CAAWX,KAAX,CAdtB,MAeWU,OAAO,CAACE,GAAR,CAAY,IAAZ,EAAkBC,IAAI,CAACC,GAAL,EAf7B,4BAgBY,KAAK/B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,cAAxB,EAhBZ,wDAkBkBzC,CAAAA,KAAK,CAAC2C,GAAN,2EAA6ET,EAA7E,EAAmF,CAAEX,QAAQ,CAAEX,OAAZ,CAAqBY,eAAe,CAAEX,OAAtC,CAAnF,CAAmI,CACrIkB,OAAO,CAAC,CACJ,aAAaN,KADT,CAD6H,CAAnI,CAlBlB,SAuBY,KAAKmB,iBAAL,CAAuBjC,IAAI,CAACkB,GAA5B,EAvBZ,wCA0BQgB,KAAK,CAAC,8BAAD,CAAL,CA1BR,8D,mNA8BA,kBAAwBX,EAAxB,8JACUT,KADV,CACkBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADlB,CAEQQ,OAFR,CAEkB9B,GAAG,CAAC+B,MAAJ,CAAWX,KAAX,CAFlB,CAGI;AACA;AACA;AALJ,uBAMyBzB,CAAAA,KAAK,CAAC8B,GAAN,wEAA0E,KAAKtB,KAAL,CAAWc,UAAX,CAAsBO,GAAhG,EAAsG,CACvHE,OAAO,CAAC,CACJ,aAAaN,KADT,CAD+G,CAAtG,CANzB,QAMQO,QANR,gBAWIb,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA2BY,QAAQ,CAACC,IAApC,EACIa,YAZR,CAYuBd,QAAQ,CAACC,IAZhC,CAaI,KAAKzB,KAAL,CAAWJ,WAAX,CAAuB0C,YAAY,CAAC,CAAD,CAAnC,EACA3B,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAoB,KAAKZ,KAAL,CAAWc,UAA/B,EACA,KAAKD,QAAL,CAAc,CACVV,IAAI,CAAE,KAAKH,KAAL,CAAWc,UADP,CAAd,EAGJ;AAlBA,8D,uIAoBC,kBAAS,CACNH,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACA,KAAKC,QAAL,CAAc,CACVL,QAAQ,CAAC,IADC,CAAd,EAGH,C,sBAED,iBAAS,iBACL;AACA;AACA,iBAAoC,KAAKP,KAAzC,CAAMC,SAAN,cAAMA,SAAN,CAAgBM,QAAhB,cAAgBA,QAAhB,CAAyBF,MAAzB,cAAyBA,MAAzB,CACAK,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAqBN,MAArB,EACAK,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWO,QAAvB,EACA,GAAGA,QAAH,CAAY,CACR,mBAAO,KAAC,QAAD,EAAU,EAAE,iBAAWF,MAAX,CAAZ,EAAP,CACH,CACD,GAAIJ,SAAJ,CAAe,CACX,GAAIqC,CAAAA,eAAe,CAAGrC,SAAS,CAACsC,GAAV,CAAc,SAACC,QAAD,CAAc,CAC9C,mBACI,aAAwB,SAAS,CAAC,oBAAlC,wBACI,oBAAKA,QAAQ,CAACA,QAAd,EADJ,cAEI,mCACI,4BAAQA,QAAQ,CAACC,OAAjB,GADJ,cAEI,4BAAQD,QAAQ,CAACE,OAAjB,GAFJ,cAGI,4BAAQF,QAAQ,CAACG,OAAjB,GAHJ,cAII,4BAAQH,QAAQ,CAACI,OAAjB,GAJJ,cAKI,kCAAcJ,QAAQ,CAACK,aAAvB,GALJ,GAFJ,cAUI,aAAK,SAAS,CAAC,oBAAf,wBACI,KAAC,IAAD,EAAM,EAAE,8BAAwBL,QAAQ,CAACpB,GAAjC,aAAwCf,MAAxC,CAAR,uBACI,eAAQ,SAAS,CAAC,UAAlB,kBADJ,EADJ,cAII,eAAQ,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACyC,cAAL,CAAoBN,QAAQ,CAACpB,GAA7B,CAAN,EAAjB,CAA0D,SAAS,CAAC,UAApE,oBAJJ,GAVJ,GAAUoB,QAAQ,CAACpB,GAAnB,CADJ,CAmBH,CApBqB,CAAtB,CAsBH,CAED,mBACI,aAAK,SAAS,CAAC,kBAAf,WAEQ,CAAC,KAAKpB,KAAL,CAAWM,MAAZ,cAEI,aAAK,SAAS,CAAC,kBAAf,wBACI,YAAK,SAAS,CAAC,cAAf,uBAEQ,eAAQ,OAAO,CAAE,KAAKE,OAAtB,CAA8B,SAAS,CAAC,mBAAxC,kBAFR,EADJ,cAMI,aAAK,SAAS,CAAC,sBAAf,wBACI,WAAI,SAAS,CAAC,aAAd,UAA6B,KAAKR,KAAL,CAAWE,IAAX,CAAgBY,QAA7C,EADJ,cAEI,aAFJ,cAGI,UAAG,SAAS,CAAC,uBAAb,UAAsC,KAAKd,KAAL,CAAWE,IAAX,CAAgBa,eAAtD,EAHJ,cAII,YAAK,SAAS,CAAC,YAAf,uBACI,eAAQ,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACgC,WAAL,EAAN,EAAjB,CAA2C,SAAS,CAAC,UAArD,oBADJ,EAJJ,GANJ,GAFJ,cAkBI,aAAK,SAAS,CAAC,kBAAf,wBACI,YAAK,SAAS,CAAC,cAAf,uBACI,KAAC,IAAD,EAAM,EAAE,CAAC,OAAT,uBACI,eAAQ,SAAS,CAAC,mBAAlB,kBADJ,EADJ,EADJ,cAMI,aAAK,SAAS,CAAC,sBAAf,wBAGI,cAAO,WAAW,CAAE,KAAK/C,KAAL,CAAWE,IAAX,CAAgBY,QAApC,CACC,QAAQ,CAAE,kBAACkC,CAAD,CAAM,CACbtC,OAAO,CAACC,GAAR,CAAY,GAAZ,CAAgBqC,CAAC,CAACC,MAAF,CAASC,KAAzB,EACA,MAAI,CAACtC,QAAL,CAAc,CAACT,OAAO,CAAE6C,CAAC,CAACC,MAAF,CAASC,KAAnB,CAAd,EAAyC,CAH7C,CAII,SAAS,CAAC,yBAJd,EAHJ,cAQK,aARL,cASI,iBAAU,WAAW,CAAE,KAAKlD,KAAL,CAAWE,IAAX,CAAgBa,eAAvC,CACA,QAAQ,CAAE,kBAACiC,CAAD,CAAO,CACbtC,OAAO,CAACC,GAAR,CAAY,GAAZ,CAAgBqC,CAAC,CAACC,MAAF,CAASC,KAAzB,EACA,MAAI,CAACtC,QAAL,CAAc,CAAER,OAAO,CAAE4C,CAAC,CAACC,MAAF,CAASC,KAApB,CAAd,EAA0C,CAH9C,CAIA,SAAS,CAAC,uBAJV,EATJ,cAcI,aAAK,SAAS,CAAC,oBAAf,wBACI,eAAQ,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACC,UAAL,EAAN,EAAjB,CAA0C,SAAS,CAAC,UAApD,kBADJ,cAEI,eAAQ,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACJ,WAAL,EAAN,EAAjB,CAA2C,SAAS,CAAC,UAArD,oBAFJ,GAdJ,GANJ,GApBZ,cA+CI,aAAK,SAAS,CAAC,uBAAf,wBACI,YAAK,SAAS,CAAC,kBAAf,uBACA,KAAC,IAAD,EAAM,EAAE,6BAAuB,KAAKhD,KAAL,CAAWc,UAAX,CAAsBO,GAA7C,aAAoDf,MAApD,CAAR,CAAsE,SAAS,CAAC,UAAhF,uBACQ,eAAQ,SAAS,CAAC,SAAlB,CAA4B,EAAE,CAAC,kBAA/B,0BADR,EADA,EADJ,cAMI,aANJ,cAMU,aANV,cAOI,YAAK,SAAS,CAAC,kBAAf,UACKiC,eADL,EAPJ,GA/CJ,GADJ,CA6DH,C,uBAhOmBhD,S,EAkOxB,QAAS8D,CAAAA,eAAT,CAAyBpD,KAAzB,CAAgC,CAC5B,MAAO,CACHa,UAAU,CAAEb,KAAK,CAACa,UADf,CAAP,CAGH,CAED,cAAenB,CAAAA,OAAO,CAAC0D,eAAD,CAAkB,CAAEzD,WAAW,CAAXA,WAAF,CAAlB,CAAP,CAA0CG,SAA1C,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link,Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { editingQuiz } from '../../Reducer/Reducer';\nimport jwt from \"jsonwebtoken\";\nimport './Host-Question.css';\nimport './Host.css';\nimport QuizComponent from './QuizComponent';\n// import {useParams} from 'react-router-dom';\nclass Questions extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            questions: [],\n            quiz: {},\n            newName: '',\n            newInfo: '',\n            userId:'',\n            toggle: false,\n            redirect:false\n        }\n        this.setDone = this.setDone.bind(this);\n      \n    }\n    componentDidMount() {\n        // const { userId } = useParams();\n        // var history = useHistory();\n        console.log(\"Addanswercomponent2 called\");\n        // var userId = this.props.match.params.id;\n        // console.log(\"id\",userId);\n        console.log(\"props\", this.props);\n        this.setState({\n            quiz: this.props.quizToEdit,\n            newName:this.props.quizToEdit.quizName,\n            newInfo:this.props.quizToEdit.quizDescription,\n            userId:this.props.quizToEdit.userId\n        })\n        console.log(\"quiz\", this.state.quiz);\n        const token = localStorage.getItem(\"token\");\n        // var decoded = jwt.decode(token);\n      \n        this.getQuestions();\n        \n    }\n\n    async getQuestions() {\n        const token = localStorage.getItem(\"token\");\n       console.log(`id is ${this.props.quizToEdit._id}`)\n       var response = await axios.get(`https://multiplayer-online-quiz-game.vercel.app/quizquestions/getQuestions/${this.props.quizToEdit._id}`,{\n           headers:{\n               'auth-token':token\n           }\n       })\n            console.log(\"data\", response.data);\n            this.setState({\n                questions: response.data,\n            })\n        }\n\n    async deleteQuestion(id) {\n        const token = localStorage.getItem(\"token\");\n       \n        var decoded = jwt.decode(token);\n        if(decoded.exp*1000<=Date.now()){\n            this.props.history.push(\"/users/login\");\n        }else{\n            var response =  await axios.delete(`https://multiplayer-online-quiz-game.vercel.app/quizquestions/deleteQuestion/${id}`,{\n           headers:{\n               'auth-token':token\n           }\n       })\n        this.getQuestions();\n        }\n    }\n\n    displayEdit() {\n        this.setState({\n            toggle: !this.state.toggle\n        })\n    }\n\n    async updateQuiz() {\n        \n\n        let { newName, newInfo, quiz } = this.state;\n        console.log(\"update quiz called\");\n        // let { quiz } = this.state;\n        console.log(\"quiz\",quiz);\n        this.setState({\n            toggle: !this.state.toggle\n        })\n      \n        if (newName && newInfo) {\n            var id = quiz._id;\n            const token = localStorage.getItem(\"token\");\n            var decoded = jwt.decode(token);\n            if(decoded.exp*1000<=Date.now()){\n                this.props.history.push(\"/users/login\");\n            }else{\n                await axios.put(`https://multiplayer-online-quiz-game.vercel.app/quiz/updateQuiz/${id}`, { quizName: newName, quizDescription: newInfo },{\n                    headers:{\n                        'auth-token':token\n                    }\n                })\n                this.handleUpdatedQuiz(quiz._id)\n            }\n        } else {\n            alert('All fields must be completed')\n        }\n        } \n    \n    async handleUpdatedQuiz(id) {\n        const token = localStorage.getItem(\"token\");\n        var decoded = jwt.decode(token);\n        // if(decoded.exp*1000<=Date.now()){\n        //     this.props.history.push(\"/users/login\");\n        // }else{\n        var response = await axios.get(`https://multiplayer-online-quiz-game.vercel.app/quiz/getQuiz/${this.props.quizToEdit._id}`,{\n            headers:{\n                'auth-token':token\n            }\n        })\n        console.log(\"responseData\",response.data);\n        var responseData = response.data;\n        this.props.editingQuiz(responseData[0]);\n        console.log(\"props\",this.props.quizToEdit)\n        this.setState({\n            quiz: this.props.quizToEdit\n        })\n    // }\n    }\n     setDone(){\n        console.log(\"setDone called\");\n        this.setState({\n            redirect:true\n        })\n    }\n\n    render() {\n        // var userId = this.props.match.params.id;\n        // console.log(\"answercomponentuserId\",userId);\n        let { questions,redirect,userId } = this.state;\n        console.log(\"userId\",userId);\n        console.log(this.state.redirect);\n        if(redirect){\n            return <Redirect to={`/host/${userId}`}/>;\n        }\n        if (questions) {\n            var mappedQuestions = questions.map((question) => {\n                return (\n                    <div key={question._id} className='question-container'>\n                        <h1>{question.question}</h1>\n                        <ul>\n                            <li>1: {question.answer1}</li>\n                            <li>2: {question.answer2}</li>\n                            <li>3: {question.answer3}</li>\n                            <li>4: {question.answer4}</li>\n                            <li>Correct: {question.correctAnswer}</li>\n\n                        </ul>\n                        <div className='btn-container-edit' >\n                            <Link to={`/host/editquestion/${question._id}/${userId}`}>\n                                <button className='btn-play' >Edit</button>\n                            </Link>\n                            <button onClick={() => this.deleteQuestion(question._id)} className='btn-play'>Delete</button>\n                        </div>\n                    </div>\n                )\n            })\n\n        }\n\n        return (\n            <div className='mapped-container' >\n                {\n                    !this.state.toggle\n                        ?\n                        <div className='toggle-container'>\n                            <div className='btn-done-div'>\n                                {/* <Link to={`/host/${this.props.userId}`}> */}\n                                    <button onClick={this.setDone}className='btn-play btn-done' >Done</button>\n                                {/* </Link> */}\n                            </div>\n                            <div className='kwizz-container-edit'>\n                                <h1 className='kwizz-title'>{this.state.quiz.quizName}</h1>\n                                <br />\n                                <p className='kwizz-info kwizz-desc'>{this.state.quiz.quizDescription}</p>\n                                <div className='btn-update'>\n                                    <button onClick={() => this.displayEdit()} className='btn-play'>Update</button>\n                                </div>\n                            </div>\n                        </div>\n                        :\n                        <div className='toggle-container'>\n                            <div className='btn-done-div'>\n                                <Link to='/host'>\n                                    <button className='btn-play btn-done' >Done</button>\n                                </Link>\n                            </div>\n                            <div className='kwizz-container-edit'>\n                                {/* <h1 className='kwizz-title'>{this.state.quiz.quizName}</h1>\n                        <p className='kwizz-info kwizz-desc'>{this.state.quiz.quizDescription}</p> */}\n                                <input placeholder={this.state.quiz.quizName}\n                                 onChange={(e) =>{\n                                    console.log(\"e\",e.target.value);\n                                    this.setState({newName: e.target.value})}}\n                                    className='title-input input-edit ' />\n                                 <br />\n                                <textarea placeholder={this.state.quiz.quizDescription} \n                                onChange={(e) => {\n                                    console.log(\"e\",e.target.value);\n                                    this.setState({ newInfo: e.target.value})}} \n                                className='desc-input input-edit'></textarea>\n                                <div className='btn-container-edit'>\n                                    <button onClick={() => this.updateQuiz()} className='btn-play'>Save</button>\n                                    <button onClick={() => this.displayEdit()} className='btn-play'>Cancel</button>\n                                </div>\n                            </div>\n                        </div>\n                }\n                <div className='question-edit-wrapper' >\n                    <div className='add-quesiton-div' >\n                    <Link to={`/host/newquestion/${this.props.quizToEdit._id}/${userId}`} className='btn-link'>\n                            <button className='btn-new' id='add-question-btn'>Add Question</button>\n                        </Link>\n                    </div>\n                    <br /><br />\n                    <div className='mapped-questions'>\n                        {mappedQuestions}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\nfunction mapStateToProps(state) {\n    return {\n        quizToEdit: state.quizToEdit\n    }\n}\n\nexport default connect(mapStateToProps, { editingQuiz })(Questions)"]},"metadata":{},"sourceType":"module"}